---
layout: post
title:  "Cosmos-SDK Scavenge 01"
author: violetstair
categories: [ CosmosSDK ]
tags: [golang, programming, cosmos-sdk]
image: assets/images/cosmos-sdk.png
description: "COSMOS SDK로 만들어보는 현상금 사냥꾼 게임"
featured: false
hidden: true
---


이번에 만들어볼 어플리케이션은 현상금 사냥꾼 입니다.
현상금 사냥꾼은 참가자가 문제를 풀면 보상이 주어지는 어플리케이션 입니다. 게임의 기본 매커니짐은 다음과 같습니다.

* **누구나 질문을 게시할 수 있으며, 답변은 암호화되어 저장된다.**
* **모든 문제는 코인으로 지급되는 현상금이 걸려있다.**
* **누구든지 질문에 대한 답변을 올릴 수 있으며, 정답을 맞출경우 코인 현상금을 받게 된다.**

지연 시간이 있는 공용 네트워크를 다룰 때 [중간자 공격](https://en.wikipedia.org/wiki/Man-in-the-middle_attack) 같은 일이 발생할 수 있습니다.
공격자는 당사자 중 하나 인 척하는 대신 한 당사자로부터 민감한 정보를 가져 와서 자신의 이익을 위해 사용합니다.

이것은 실제로 [선행 매매](https://terms.naver.com/entry.nhn?docId=2066686&cid=50305&categoryId=50305)라고하며 다음과 같이 발생합니다.

1. 사용자가 어떤 질문에 답변을 작성해 보상을 노립니다.
2. 공격자는 사용자의 답변을 미리 확인하고 그에 앞서 직접 답변을 게시합니다.
3. 공격자의 답변이 먼저 게시되었기 때문에 사용자 대신 보상을 받습니다.

선행매매를 방지하기 위해 **commit-reveal** 체계를 구현합니다.
commit-reveal 체계는 악용 가능한 단일 상호 작용을 변환하고 이를 두 개의 안전한 상호 작용으로 전환합니다.

**첫 번째 interaction은 commit 입니다.** 여기서는 후속 interaction에 답변을 게시하기위한 "commit" 입니다.
이 commit은 정확하다고 생각하는 답변과 결합된 이름의 암호화 해시로 구성됩니다.
앱은 답을 알고 있지만 답이 맞는지 확인되지 않았다는 주장 인 그 값을 저장합니다.

**그 다음 interaction은 reveal 입니다.**
이름과 함께 일반 텍스트로 답변을 게시하는 곳입니다.
응용 프로그램은 귀하의 답변과 귀하의 이름을 가져와 암호로 해시합니다.
결과가 커밋 단계에서 이전에 제출 한 내용과 일치하면, 그 답을 아는 사람이 실제로는 당신이 선행 매매한 사람이 아니라는 증거가 될 것입니다.

![front run](/assets/images/scavenge/front-run.jpg)

이와 같은 시스템은 **비신뢰성** 방식으로 모든 종류의 게임 플랫폼과 함께 사용할 수 있습니다.
당신이 젤다의 전설을 플레이하고 있고 게임이 이미 포함 된 다양한 현상금 사냥에 대한 모든 답변으로 컴파일되었다고 상상해보십시오.
레벨을 이길 때 게임은 비밀 답변을 공개 할 수 있습니다.
그런 다음 명시 적으로 또는 배후에서 이 답변을 이름과 결합하여 해시하고 제출 한 후 나중에 공개 할 수 있습니다.
당신의 이름은 보상을 받고 게임에서 더 많은 포인트를 얻게 될 것입니다.

이를 달성하는 또 다른 방법은 비디오 게임 회사가 제어하는 관리자 계정이있는 액세스 제어 목록을 갖는 것입니다.
이 관리자 계정은 레벨을 이겼음을 확인한 다음 포인트를 줄 수 있습니다.
이것의 문제는 ***단일 실패 지점**과 시스템 공격을 시도하는 단일 대상을 생성한다는 것입니다.
성을 지배하는 열쇠가 하나 있다면 그 열쇠가 손상되면 전체 시스템이 망가집니다.
또한 플레이어가 포인트를 얻기 위해 관리자 계정이 항상 온라인 상태 여야하는 경우 조정에 문제가 발생합니다.
커밋 공개 시스템을 사용하는 경우 플레이 권한이 필요하지 않은 더 신뢰할 수있는 아키텍처가 있습니다.
이 디자인 결정에는 장점과 단점이 있지만 신중하게 구현하면 단일 병목 현상이나 실패 지점없이 게임을 확장 할 수 있습니다.
