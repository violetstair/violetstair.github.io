---
layout: post
title:  "Cosmos-SDK Scavenge 07"
author: violetstair
categories: [ CosmosSDK ]
tags: [golang, programming, cosmos-sdk]
image: assets/images/cosmos-sdk.png
description: "COSMOS SDK로 만들어보는 현상금 사냥꾼 게임"
featured: false
hidden: true
---

## CLI

CLI 도구를 이용해 각 모듈의 기능을 처리할 수 있도록 서명할 수있으며 모듈의 상태를 질의하는 기능도 포함하게 됩니다.
CLI 도구를 이용해 새로운 계정에 대한 키를 생성하거나, 어플리케이션과의 상호작용을 확인하는 등의 작업을 수행할 수있습니다.

CLI 모듈은 `./x/scavenge/client/cli/`에 있는 `tx.go`와 `query.go`라는 두 파일로 구성됩니다.
`tx.go` 파일은 상태를 업데이트할 messages를 포함하는 transaction을 만듭니다.
`query.go`는 상태를 읽을 수 있는 기능을 제공하는 queries를 생성합니다.
두 파일 모두 [Cobra](https://github.com/spf13/cobra) 라이브러리를 사용합니다.

### tx.go

`tx.go` 파일에는 Cosmos SDK 내의 표준 메소드 인 `GetTxCmd`가 포함되어 있습니다.
모듈에 어떤 속성이 있는지 정확히 설명하는 `module.go` 파일에서 나중에 참조됩니다.
여기서는 scavenge 모듈에 초점을 맞추고 있지만 Cosmos SDK 뿐만 아니라 다른 모듈을 이용해 어플리케이션을 만들수 도 있습니다.

`GetTxCmd` 내에서 `scavenge`라고 불리는 모듈별 command를 만들 수 있습니다.
이 명령 내에서 정의한 각 메시지 유형에 대한 하위 명령을 다음과 같이 추가합니다.

* `GetCmdCreateScavenge`
* `GetCmdCommitSolution`
* `GetCmdRevealSolution`

Each function takes parameters from the **Cobra** CLI tool to create a new msg, sign it and submit it to the application to be processed.
These functions should go into the `tx.go` file and look as follows:

각 함수는 **Cobra** CLI 도구에서 매개 변수를 가져와 새 메시지를 생성하고 서명한 다음 어플리케이션에 제출합니다.

[tx](https://github.com/cosmos/sdk-tutorials/tree/master/scavenge/x/scavenge/client/cli/tx.go)

#### sha256

일반 텍스트 솔류션을 해싱 하기위해 `sha256` 라이브러리를 사용합니다.
이 동작은 클라이언트 측에서 이루어 지므로 공개된 네트워크에는 절대 유출되지 않습니다.
따한 hash가 16진수 표현으로 변환되어 문자열로 쉽게 읽을 수 있습니다. (keeper에는 이러한 형태로 저장됩니다.)

### query.go

`query.go` 파일에는 `scavenge` 모듈을 참조하기 위해 새로운 namespace를 사용하는 **Cobra** 명령이 포함되어 있습니다.
메시지를 만들고 제출하는 대신 `query.go` 파일은 query를 만들고 사람이 읽을 수 있는 형태로 반환합니다.
처리하는 query는 `querier.go` 파일에 정의한 것과 동일합니다.

* `GetCmdListScavenges`
* `GetCmdGetScavenge`
* `GetCmdGetCommit`

이 명령어 들을 `query.go`에 다음과 같이 정의 합니다.

[query](https://github.com/cosmos/sdk-tutorials/tree/master/scavenge/x/scavenge/client/cli/query.go)

일반 텍스트를 16진수 hash 문자열로 변환하기 위해 `sha256` 라이브러리를 사용합니다.

지금까지 작성된 모듈들 모듀 주요 기능들 이지만 (`Message`, `Handler`, `Keeper`, `Querier`, `Client`) 아직 완료되지 않은 조직 작업이 있습니다.
다음 단계에서는 어플리케이션에서 사용할 수 있도록 모듈이 완전히 구성되었는지 확인 할 것 입니다.
